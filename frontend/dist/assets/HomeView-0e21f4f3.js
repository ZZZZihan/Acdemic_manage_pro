import{_ as C,a as F,y as k,j as M,z as T,r as n,o as r,c as i,b as t,g as h,d as c,w as o,F as x,A as b,t as _,x as A,e as R,B as S,E as U}from"./index-9a8ac2de.js";const W={class:"latest-achievements"},q={key:2,class:"image-carousel-container"},G=["onClick"],J={class:"image-container"},K=["src","alt"],O={class:"carousel-content"},P={class:"type-tag"},Q={class:"item-title"},X={class:"item-info"},Y={class:"item-author"},Z={class:"item-date"},ee={class:"achievement-list"},te={key:0,class:"card-image"},se=["src","alt"],ae={class:"card-header"},oe={class:"type-tag"},ne={class:"date"},ce={class:"card-title"},le={class:"card-authors"},re={class:"card-description"},_e={class:"view-more"},ie={__name:"LatestAchievements",setup(L){const m=F(),a=k([]),d=k(!1),u=M(()=>a.value.filter(e=>v(e))),p=async()=>{try{d.value=!0;const e=await S.get("/api/v1/achievements/latest?limit=10");Array.isArray(e.data)?a.value=e.data:e.data&&e.data.items&&Array.isArray(e.data.items)?a.value=e.data.items:(console.warn("响应数据格式不符合预期:",e.data),a.value=[])}catch(e){console.error("获取最新成果失败:",e),U.error("获取最新成果失败，请稍后再试"),a.value=[]}finally{d.value=!1}},v=e=>{if(!e.file_path)return!1;const l=e.file_path.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(l)},f=e=>e.file_path?`http://localhost:5003/api/v1/files/download/${e.file_path}`:"",V=(e,l)=>e?e.length>l?e.substring(0,l)+"...":e:"",g=e=>e?new Date(e).toLocaleDateString("zh-CN"):"",y=e=>{m.push(`/achievements/${e}`)};return T(()=>{p()}),(e,l)=>{const w=n("el-skeleton"),$=n("el-empty"),E=n("el-carousel-item"),B=n("el-carousel"),D=n("el-card"),I=n("el-col"),N=n("el-row"),j=n("el-button"),H=n("router-link");return r(),i("div",W,[l[1]||(l[1]=t("h2",{class:"section-title"},"最新科研成果",-1)),d.value?(r(),h(w,{key:0,rows:3,animated:""})):!a.value||a.value.length===0?(r(),h($,{key:1,description:"暂无最新成果"})):u.value.length>0?(r(),i("div",q,[c(B,{interval:4e3,type:"card",height:"280px"},{default:o(()=>[(r(!0),i(x,null,b(u.value,s=>(r(),h(E,{key:s.id},{default:o(()=>[t("div",{class:"carousel-item",onClick:z=>y(s.id)},[t("div",J,[t("img",{src:f(s),alt:s.title,class:"carousel-image"},null,8,K)]),t("div",O,[t("div",P,_(s.achievement_type),1),t("h3",Q,_(s.title),1),t("div",X,[t("span",Y,_(s.authors),1),t("span",Z,_(g(s.publish_date)),1)])])],8,G)]),_:2},1024))),128))]),_:1})])):A("",!0),t("div",ee,[c(N,{gutter:20},{default:o(()=>[(r(!0),i(x,null,b(a.value,s=>(r(),h(I,{xs:24,sm:12,md:8,key:s.id,class:"mb-20"},{default:o(()=>[c(D,{shadow:"hover",class:"achievement-card",onClick:z=>y(s.id)},{default:o(()=>[v(s)?(r(),i("div",te,[t("img",{src:f(s),alt:s.title},null,8,se)])):A("",!0),t("div",ae,[t("span",oe,_(s.achievement_type),1),t("span",ne,_(g(s.publish_date)),1)]),t("h3",ce,_(s.title),1),t("div",le,_(s.authors),1),t("p",re,_(V(s.description,100)),1)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),t("div",_e,[c(H,{to:"/achievements"},{default:o(()=>[c(j,{type:"primary"},{default:o(()=>l[0]||(l[0]=[R("查看更多成果")])),_:1})]),_:1})])])}}},de=C(ie,[["__scopeId","data-v-bcacddad"]]);const ue={class:"home-view"},pe={__name:"HomeView",setup(L){return(m,a)=>{const d=n("el-card"),u=n("el-col"),p=n("el-row");return r(),i("div",ue,[c(p,{gutter:20},{default:o(()=>[c(u,{span:24},{default:o(()=>[c(d,{class:"welcome-card mb-20"},{header:o(()=>a[0]||(a[0]=[t("div",{class:"card-header"},[t("h2",null,"成果展示")],-1)])),default:o(()=>[a[1]||(a[1]=t("div",{class:"card-content"},[t("p",null,"本系统旨在为科研实验室提供一套完整的知识管理解决方案，帮助实验室成员更好地管理科研成果、技术文档、项目进度和会议安排。")],-1))]),_:1})]),_:1})]),_:1}),c(p,{gutter:20},{default:o(()=>[c(u,{span:24},{default:o(()=>[c(de)]),_:1})]),_:1})])}}},me=C(pe,[["__scopeId","data-v-98933aa2"]]);export{me as default};
