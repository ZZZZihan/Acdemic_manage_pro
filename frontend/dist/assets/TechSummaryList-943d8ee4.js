import{_ as K,y as g,C as P,z as j,c as V,b as f,d as t,w as o,D as G,g as z,a as H,B as J,E as O,r as n,G as R,o as b,e as d,H as q,I as Q,F as W,t as X}from"./index-9a8ac2de.js";const Y={class:"tech-summary-list"},Z={class:"page-header"},ee={class:"button-group"},te={class:"pagination-container"},ae={__name:"TechSummaryList",setup(le){const k=H(),r=g([]),w=g(!1),i=g(1),v=g(10),u=g(0),l=P({type:"",tags:"",keyword:""}),m=async()=>{w.value=!0;try{const a={page:i.value,per_page:v.value,only_mine:"false"};l.type&&(a.type=l.type),l.tags&&(a.tags=l.tags),l.keyword&&(a.keyword=l.keyword),console.log("请求参数:",a),console.log("发送请求到:","/api/v1/tech_summaries");const e=await J.get("/api/v1/tech_summaries",{params:a});console.log("技术总结列表响应状态:",e.status),console.log("技术总结列表响应数据类型:",typeof e.data),console.log("技术总结列表响应数据:",JSON.stringify(e.data,null,2)),e.data&&Array.isArray(e.data)?(console.log("响应是数组，长度:",e.data.length),r.value=e.data,u.value=e.data.length):e.data&&e.data.items&&Array.isArray(e.data.items)?(console.log("响应是包含items数组的对象，items长度:",e.data.items.length),r.value=e.data.items,u.value=e.data.total||e.data.items.length):(console.warn("响应数据格式不符合预期:",e.data),r.value=[],u.value=0),console.log("处理后的summaries:",r.value),console.log("处理后的total:",u.value)}catch(a){console.error("获取技术总结列表失败:",a),console.error("错误详情:",a.response?a.response.data:a.message),O.error("获取技术总结列表失败"),r.value=[],u.value=0}finally{w.value=!1}},x=()=>{l.type="",l.tags="",l.keyword="",i.value=1,m()},h=()=>{i.value=1,m()},D=a=>{v.value=a,m()},$=a=>{i.value=a,m()},B=a=>{console.log("查看技术总结，ID:",a),console.log("跳转路径:",`/tech_summaries/${a}`),k.push(`/tech_summaries/${a}`)},U=a=>{k.push(`/tech_summaries/${a}/edit`)},A=a=>a?new Date(a).toLocaleString():"-";return j(()=>{m()}),(a,e)=>{const p=n("el-button"),c=n("el-option"),F=n("el-select"),y=n("el-form-item"),C=n("el-input"),L=n("el-form"),S=n("el-card"),_=n("el-table-column"),N=n("el-table"),T=n("el-pagination"),E=n("el-empty"),I=R("loading");return b(),V("div",Y,[f("div",Z,[e[7]||(e[7]=f("h2",{class:"page-title"},"技术总结",-1)),f("div",ee,[t(p,{type:"primary",onClick:e[0]||(e[0]=s=>a.$router.push("/tech_summaries/create"))},{default:o(()=>e[6]||(e[6]=[d("添加总结")])),_:1})])]),t(S,{class:"filter-card mb-20"},{default:o(()=>[t(L,{inline:!0,model:l,class:"filter-form",onSubmit:q(h,["prevent"])},{default:o(()=>[t(y,{label:"总结类型"},{default:o(()=>[t(F,{modelValue:l.type,"onUpdate:modelValue":e[1]||(e[1]=s=>l.type=s),placeholder:"全部类型",clearable:""},{default:o(()=>[t(c,{label:"算法",value:"算法"}),t(c,{label:"工具",value:"工具"}),t(c,{label:"方法",value:"方法"}),t(c,{label:"经验",value:"经验"}),t(c,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1}),t(y,{label:"标签"},{default:o(()=>[t(C,{modelValue:l.tags,"onUpdate:modelValue":e[2]||(e[2]=s=>l.tags=s),placeholder:"输入标签，多个用逗号分隔",clearable:""},null,8,["modelValue"])]),_:1}),t(y,{label:"关键词"},{default:o(()=>[t(C,{modelValue:l.keyword,"onUpdate:modelValue":e[3]||(e[3]=s=>l.keyword=s),placeholder:"搜索标题或内容",clearable:"",onKeyup:Q(h,["enter"])},null,8,["modelValue"])]),_:1}),t(y,null,{default:o(()=>[t(p,{type:"primary",onClick:h},{default:o(()=>e[8]||(e[8]=[d("搜索")])),_:1}),t(p,{onClick:x},{default:o(()=>e[9]||(e[9]=[d("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),G((b(),z(S,null,{default:o(()=>[r.value&&r.value.length>0?(b(),V(W,{key:0},[t(N,{data:r.value,style:{width:"100%"}},{default:o(()=>[t(_,{prop:"title",label:"标题","min-width":"200"}),t(_,{prop:"summary_type",label:"类型",width:"100"}),t(_,{prop:"tags",label:"标签","min-width":"150"}),t(_,{prop:"created_at",label:"创建时间",width:"180"},{default:o(s=>[d(X(A(s.row.created_at)),1)]),_:1}),t(_,{label:"操作",width:"150",fixed:"right"},{default:o(s=>[t(p,{size:"small",onClick:M=>B(s.row.id)},{default:o(()=>e[10]||(e[10]=[d(" 查看 ")])),_:2},1032,["onClick"]),t(p,{size:"small",type:"primary",onClick:M=>U(s.row.id)},{default:o(()=>e[11]||(e[11]=[d(" 编辑 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),f("div",te,[t(T,{"current-page":i.value,"onUpdate:currentPage":e[4]||(e[4]=s=>i.value=s),"page-size":v.value,"onUpdate:pageSize":e[5]||(e[5]=s=>v.value=s),"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next, jumper",total:u.value,onSizeChange:D,onCurrentChange:$},null,8,["current-page","page-size","total"])])],64)):(b(),z(E,{key:1,description:"暂无技术总结"}))]),_:1})),[[I,w.value]])])}}},se=K(ae,[["__scopeId","data-v-f971d726"]]);export{se as default};
