import{_ as P,u as x,y as f,C as E,c as R,b as p,d as r,w as a,H as q,e as g,a as U,r as n,o as h,E as _}from"./index-9a8ac2de.js";const k={class:"register-view"},B={class:"form-footer"},C={__name:"RegisterView",setup(N){const w=U(),c=x(),u=f(null),i=f(!1),s=E({username:"",email:"",password:"",confirmPassword:""}),b={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能小于6个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:(d,e,o)=>{e===""?o(new Error("请再次输入密码")):e!==s.password?o(new Error("两次输入密码不一致")):o()},trigger:"blur"}]},v=async()=>{u.value&&await u.value.validate(async d=>{var e,o;if(d){i.value=!0;try{const{confirmPassword:t,...m}=s;await c.register(m),_.success("注册成功，请登录"),w.push("/auth/login")}catch(t){console.error("注册失败:",t),_.error(((o=(e=t.response)==null?void 0:e.data)==null?void 0:o.message)||"注册失败，请稍后再试")}finally{i.value=!1}}})};return(d,e)=>{const o=n("el-input"),t=n("el-form-item"),m=n("el-button"),V=n("el-form"),y=n("router-link");return h(),R("div",k,[e[7]||(e[7]=p("h2",{class:"page-title"},"用户注册",-1)),r(V,{ref_key:"registerForm",ref:u,model:s,rules:b,"label-position":"top",onSubmit:q(v,["prevent"])},{default:a(()=>[r(t,{label:"用户名",prop:"username"},{default:a(()=>[r(o,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=l=>s.username=l),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),r(t,{label:"邮箱",prop:"email"},{default:a(()=>[r(o,{modelValue:s.email,"onUpdate:modelValue":e[1]||(e[1]=l=>s.email=l),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),r(t,{label:"密码",prop:"password"},{default:a(()=>[r(o,{modelValue:s.password,"onUpdate:modelValue":e[2]||(e[2]=l=>s.password=l),type:"password",placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1}),r(t,{label:"确认密码",prop:"confirmPassword"},{default:a(()=>[r(o,{modelValue:s.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=l=>s.confirmPassword=l),type:"password",placeholder:"请再次输入密码","show-password":""},null,8,["modelValue"])]),_:1}),r(t,null,{default:a(()=>[r(m,{type:"primary","native-type":"submit",loading:i.value,class:"submit-btn"},{default:a(()=>e[4]||(e[4]=[g(" 注册 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),p("div",B,[p("p",null,[e[6]||(e[6]=g("已有账号？")),r(y,{to:"/auth/login"},{default:a(()=>e[5]||(e[5]=[g("立即登录")])),_:1})])])])}}},F=P(C,[["__scopeId","data-v-b13c61e3"]]);export{F as default};
